<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="css/style_mask_and_validation.css">
</head>

<body>
  <form action="" class="form">
    <input name="Имя" type="text" placeholder="Имя*" data-validate-field="name">
    <input name="tel" type="tel" placeholder="Телефон*" data-validate-field="tel" data-validate-rules="phone">
    <input name="Email" type="email" placeholder="E-mail*" data-validate-field="mail" id="mail">
    <button>Заказать</button>
  </form>
  <script src="js/just-validate.min.js"></script>
  <script src="js/inputmask.min.js"></script>
  <script>
    var selector = document.querySelector("input[type='tel']");
    var im = new Inputmask("+7(999) 999-99-99");

    im.mask(selector);

    const validation = new JustValidate('.form');

    new JustValidate('.form', {
      rules: {
        name: {
          required: true,
          minLength: 2,
          maxLength: 30
        },
        tel: {
          required: true,
          function: (name, value) => {
            const phone = selector.inputmask.unmaskedvalue()
            return Number(phone) && phone.length === 10
          }
        },
        mail: {
          required: true,
          email: true
        },
      },
      messages: {
        name: {
          required: 'Вы не ввели имя',
          minLength: 'Слишком короткое имя',
          maxLength: 'Слишком длинное имя'
        },
        tel: {
          required: 'Вы не ввели телефон',
          function: 'Вы ввели телефон не полностью'
        },
        mail: {
          required: 'Вы не ввели e-mail',
          email: 'Неверный формат e-mail'
        },
      },
    });
  </script>
</body>

</html>
